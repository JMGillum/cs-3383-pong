using UnityEngine;
using UnityEngine.InputSystem;
using System.Random;

public class paddleScript : MonoBehaviour {
  public Rigidbody2D myRigidBody;
  InputAction moveAction;
  lastUpdate = 0;
  Vector2 move;
  // Start is called once before the first execution of Update after the MonoBehaviour is created
  void Start() {
    myRigidBody = GetComponent<Rigidbody2D>();
    moveAction = InputSystem.actions.FindAction("Move");
  }

  // Update is called once per frame
  void Update() {
    if (this.tag == "player_paddle"){
      move = moveAction.ReadValue<Vector2>();
    } else if (this.tag == "computer_paddle"){
      if (lastUpdate >= 60){
        Random rand = new System.Random();
        move = rand.Next(2) ? Vector2.up : Vector2.down;
        lastUpdate = 0;
      } else {
        lastUpdate++;
      }
    }
    //Debug.Log(move);
  }
  void FixedUpdate() {
    int speed = 5;
    if(move.x != 0){
      return;
    }
    // Move was only up or down
    Vector2 position = (Vector2)myRigidBody.position + move * speed * Time.deltaTime;
    myRigidBody.MovePosition(position);
    
  }
  void OnCollisionEnter2D(Collision2D c) {
    Debug.Log("Paddle collided with " + c.collider.gameObject.name);
  }

  void OnCollisionExit2D(Collision2D c){
    Debug.Log("Paddle stopped colliding with " + c.collider.gameObject.name);
  }
}
